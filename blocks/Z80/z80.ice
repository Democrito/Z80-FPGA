{
  "version": "1.2",
  "package": {
    "name": "Z80",
    "version": "Z80",
    "description": "Microprocesador Z80",
    "author": "Based on TV80",
    "image": "%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22296.115%22%20version=%221.2%22%20height=%22296.115%22%20viewBox=%220%200%20222.08599%20222.08601%22%3E%3Cdesc%3EFritzing%20breadboard%20generated%20by%20brd2svg%3C/desc%3E%3Cg%20transform=%22scale(4.477)%20rotate(90%2025.1%2024.8)%22%20stroke-width=%220%22%3E%3Cpath%20fill=%22#8c8c8c%22%20d=%22M49.906%208.587h-4.252v-.992h4.252zM49.906%2010.003h-4.252v-.992h4.252zM49.906%2011.421h-4.252v-.992h4.252zM49.906%2012.839h-4.252v-.992h4.252zM49.906%2014.255h-4.252v-.992h4.252zM49.906%2015.673h-4.252v-.992h4.252zM49.906%2017.09h-4.252V16.1h4.252zM49.906%2018.507h-4.252v-.992h4.252zM49.906%2019.925h-4.252v-.992h4.252zM49.906%2021.343h-4.252v-.992h4.252zM49.906%2022.76h-4.252v-.992h4.252zM49.906%2024.177h-4.252v-.992h4.252zM49.906%2025.595h-4.252v-.992h4.252zM49.906%2027.011h-4.252v-.992h4.252zM49.906%2028.429h-4.252v-.992h4.252zM49.906%2029.846h-4.252v-.992h4.252zM49.906%2031.264h-4.252v-.992h4.252zM49.906%2032.68h-4.252v-.991h4.252zM49.906%2034.098h-4.252v-.992h4.252zM49.906%2035.516h-4.252v-.992h4.252zM49.906%2036.932h-4.252v-.992h4.252zM49.906%2038.35h-4.252v-.992h4.252zM49.906%2039.768h-4.252v-.992h4.252zM49.906%2041.184h-4.252v-.992h4.252zM49.906%2042.602h-4.252v-.992h4.252zM42.608%2049.902h-.992V45.65h.992zM41.19%2049.902h-.992V45.65h.992zM39.772%2049.902h-.992V45.65h.992zM38.356%2049.902h-.992V45.65h.992zM36.938%2049.902h-.992V45.65h.992zM35.52%2049.902h-.991V45.65h.992zM34.104%2049.902h-.992V45.65h.992zM32.686%2049.902h-.992V45.65h.992zM31.269%2049.902h-.992V45.65h.992zM29.851%2049.901h-.992V45.65h.992zM28.434%2049.901h-.992V45.65h.992zM27.017%2049.901h-.992V45.65h.992zM25.6%2049.901h-.993V45.65h.992zM24.183%2049.901h-.992V45.65h.992zM22.765%2049.901h-.992V45.65h.992zM21.347%2049.901h-.992V45.65h.992zM19.93%2049.901h-.991V45.65h.992zM18.513%2049.901h-.992V45.65h.992zM17.095%2049.901h-.992V45.65h.992zM15.679%2049.901h-.992V45.65h.992zM14.261%2049.901h-.992V45.65h.992zM12.843%2049.901h-.992V45.65h.992zM11.427%2049.901h-.992V45.65h.992zM10.01%2049.901h-.993V45.65h.992zM8.592%2049.901H7.6V45.65h.992zM4.553%2042.602H.3v-.992h4.252zM4.553%2041.184H.3v-.992h4.252zM4.553%2039.768H.3v-.992h4.252zM4.553%2038.35H.3v-.992h4.252zM4.553%2036.932H.3v-.992h4.252zM4.553%2035.516H.3v-.992h4.252zM4.553%2034.098H.3v-.992h4.252zM4.553%2032.68H.3v-.991h4.252zM4.553%2031.264H.3v-.992h4.252zM4.553%2029.846H.3v-.992h4.252zM4.553%2028.429H.3v-.992h4.252zM4.553%2027.011H.3v-.992h4.252zM4.553%2025.595H.3v-.992h4.252zM4.553%2024.177H.3v-.992h4.252zM4.553%2022.76H.3v-.992h4.252zM4.553%2021.343H.3v-.992h4.252zM4.553%2019.925H.3v-.992h4.252zM4.553%2018.507H.3v-.992h4.252zM4.553%2017.09H.3V16.1h4.252zM4.553%2015.673H.3v-.992h4.252zM4.553%2014.255H.3v-.992h4.252zM4.553%2012.839H.3v-.992h4.252zM4.553%2011.421H.3v-.992h4.252zM4.553%2010.003H.3v-.992h4.252zM4.553%208.587H.3v-.992h4.252zM8.592%204.547H7.6V.295h.992zM10.01%204.547h-.993V.295h.992zM11.427%204.547h-.992V.295h.992zM12.843%204.547h-.992V.295h.992zM14.261%204.547h-.992V.295h.992zM15.679%204.547h-.992V.295h.992zM17.095%204.547h-.992V.295h.992zM18.513%204.547h-.992V.295h.992zM19.93%204.547h-.991V.295h.992zM21.347%204.547h-.992V.295h.992zM22.765%204.547h-.992V.295h.992zM24.183%204.547h-.992V.295h.992zM25.6%204.547h-.993V.295h.992zM27.017%204.547h-.992V.295h.992zM28.434%204.547h-.992V.295h.992zM29.851%204.547h-.992V.295h.992zM31.269%204.547h-.992V.295h.992zM32.686%204.547h-.992V.295h.992zM34.104%204.547h-.992V.295h.992zM35.52%204.547h-.991V.295h.992zM36.938%204.547h-.992V.295h.992zM38.356%204.547h-.992V.295h.992zM39.772%204.547h-.992V.295h.992zM41.19%204.547h-.992V.295h.992zM42.608%204.547h-.992V.295h.992z%22/%3E%3Cpath%20fill=%22#303030%22%20d=%22M5.258%205.258h39.685v39.685H5.258z%22/%3E%3Cpath%20fill=%22#1f1f1f%22%20d=%22M5.258%205.258h39.685l-.72.72H5.978zM5.258%2044.943h39.685l-.72-.72H5.978z%22/%3E%3Cpath%20d=%22M5.258%205.258v39.685l.72-.72V5.978z%22/%3E%3Cpath%20fill=%22#3d3d3d%22%20d=%22M44.943%205.258v39.685l-.72-.72V5.978z%22/%3E%3Ccircle%20cx=%227.418%22%20cy=%2242.783%22%20r=%22.72%22%20fill=%22#1f1f1f%22/%3E%3C/g%3E%3Ctext%20style=%22line-height:1.25;-inkscape-font-specification:ubuntu;text-align:start%22%20x=%2269.107%22%20y=%22106.106%22%20font-weight=%22400%22%20font-size=%2250.208%22%20font-family=%22ubuntu%22%20letter-spacing=%220%22%20word-spacing=%220%22%20fill=%22#ff0%22%20stroke-width=%223.138%22%3E%3Ctspan%20x=%2269.107%22%20y=%22106.106%22%20style=%22-inkscape-font-specification:'ubuntu%20Medium'%22%20font-weight=%22500%22%3EZ80%3C/tspan%3E%3C/text%3E%3Ctext%20style=%22line-height:1.25;-inkscape-font-specification:ubuntu;text-align:start%22%20x=%2274.46%22%20y=%22155.505%22%20font-weight=%22400%22%20font-size=%2234.387%22%20font-family=%22ubuntu%22%20letter-spacing=%220%22%20word-spacing=%220%22%20fill=%22#fff%22%20stroke-width=%222.149%22%3E%3Ctspan%20x=%2274.46%22%20y=%22155.505%22%20style=%22-inkscape-font-specification:'ubuntu%20Medium'%22%20font-weight=%22500%22%3ECPU%3C/tspan%3E%3C/text%3E%3C/svg%3E"
  },
  "design": {
    "board": "alhambra-ii",
    "graph": {
      "blocks": [
        {
          "id": "37d3da38-10f5-437c-80a2-083674d6a225",
          "type": "basic.input",
          "data": {
            "name": "",
            "clock": true,
            "virtual": true
          },
          "position": {
            "x": 264,
            "y": 136
          }
        },
        {
          "id": "d604cf48-4de8-4aad-b89a-e9ab1c420515",
          "type": "basic.output",
          "data": {
            "name": "m1_n",
            "virtual": true
          },
          "position": {
            "x": 992,
            "y": 200
          }
        },
        {
          "id": "dc42ef15-e7e1-436e-8800-8218e1b4aa0c",
          "type": "basic.output",
          "data": {
            "name": "mreq_n",
            "virtual": true
          },
          "position": {
            "x": 1120,
            "y": 240
          }
        },
        {
          "id": "e9f48b85-1c5b-44f5-b2e4-0cdbddf2b148",
          "type": "basic.input",
          "data": {
            "name": "reset_n",
            "clock": false,
            "virtual": true
          },
          "position": {
            "x": 360,
            "y": 272
          }
        },
        {
          "id": "de931c26-83b6-49cd-bbbc-902c084f9174",
          "type": "basic.output",
          "data": {
            "name": "iorq_n",
            "virtual": true
          },
          "position": {
            "x": 992,
            "y": 280
          }
        },
        {
          "id": "45cc2a84-a11a-4787-9daa-9c02a88aa039",
          "type": "basic.output",
          "data": {
            "name": "rd_n",
            "virtual": true
          },
          "position": {
            "x": 1120,
            "y": 320
          }
        },
        {
          "id": "7fea655e-be65-445a-949f-db801a541a62",
          "type": "basic.input",
          "data": {
            "name": "wait_n",
            "clock": false,
            "virtual": true
          },
          "position": {
            "x": 256,
            "y": 328
          }
        },
        {
          "id": "72a9a3d0-2547-4669-88bc-7b28d75b8d93",
          "type": "basic.output",
          "data": {
            "name": "wr_n",
            "virtual": true
          },
          "position": {
            "x": 992,
            "y": 360
          }
        },
        {
          "id": "23e89c7b-4f7d-45fa-a57e-02cd1272e9ad",
          "type": "basic.input",
          "data": {
            "name": "int_n",
            "clock": false,
            "virtual": true
          },
          "position": {
            "x": 360,
            "y": 384
          }
        },
        {
          "id": "922c2c6c-cab0-4ff4-a8f2-6686bf36bd96",
          "type": "basic.output",
          "data": {
            "name": "rfsh_n",
            "virtual": true
          },
          "position": {
            "x": 1120,
            "y": 400
          }
        },
        {
          "id": "46bad1d2-a5f2-4da3-85a6-10f3c702eee2",
          "type": "basic.input",
          "data": {
            "name": "nmi_n",
            "clock": false,
            "virtual": true
          },
          "position": {
            "x": 256,
            "y": 440
          }
        },
        {
          "id": "b488f5a2-c63e-4dfa-ba98-946d88d9005d",
          "type": "basic.output",
          "data": {
            "name": "halt_n",
            "virtual": true
          },
          "position": {
            "x": 992,
            "y": 440
          }
        },
        {
          "id": "aa07f9af-fc38-47a2-8102-be32b3a64dd4",
          "type": "basic.output",
          "data": {
            "name": "busak_n",
            "virtual": true
          },
          "position": {
            "x": 1120,
            "y": 480
          }
        },
        {
          "id": "3e1d1885-b162-43a3-a647-d90f20ebe275",
          "type": "basic.input",
          "data": {
            "name": "busrq_n",
            "clock": false,
            "virtual": true
          },
          "position": {
            "x": 360,
            "y": 496
          }
        },
        {
          "id": "d8afee16-1b38-4907-875a-60e69eccac4e",
          "type": "basic.output",
          "data": {
            "name": "A",
            "range": "[15:0]",
            "pins": [
              {
                "index": "15",
                "name": "",
                "value": ""
              },
              {
                "index": "14",
                "name": "",
                "value": ""
              },
              {
                "index": "13",
                "name": "",
                "value": ""
              },
              {
                "index": "12",
                "name": "",
                "value": ""
              },
              {
                "index": "11",
                "name": "",
                "value": ""
              },
              {
                "index": "10",
                "name": "",
                "value": ""
              },
              {
                "index": "9",
                "name": "",
                "value": ""
              },
              {
                "index": "8",
                "name": "",
                "value": ""
              },
              {
                "index": "7",
                "name": "",
                "value": ""
              },
              {
                "index": "6",
                "name": "",
                "value": ""
              },
              {
                "index": "5",
                "name": "",
                "value": ""
              },
              {
                "index": "4",
                "name": "",
                "value": ""
              },
              {
                "index": "3",
                "name": "",
                "value": ""
              },
              {
                "index": "2",
                "name": "",
                "value": ""
              },
              {
                "index": "1",
                "name": "",
                "value": ""
              },
              {
                "index": "0",
                "name": "",
                "value": ""
              }
            ],
            "virtual": true
          },
          "position": {
            "x": 992,
            "y": 520
          }
        },
        {
          "id": "2ae0b1f2-c68b-406a-866a-e9947c2423ce",
          "type": "basic.output",
          "data": {
            "name": "do",
            "range": "[7:0]",
            "pins": [
              {
                "index": "7",
                "name": "",
                "value": ""
              },
              {
                "index": "6",
                "name": "",
                "value": ""
              },
              {
                "index": "5",
                "name": "",
                "value": ""
              },
              {
                "index": "4",
                "name": "",
                "value": ""
              },
              {
                "index": "3",
                "name": "",
                "value": ""
              },
              {
                "index": "2",
                "name": "",
                "value": ""
              },
              {
                "index": "1",
                "name": "",
                "value": ""
              },
              {
                "index": "0",
                "name": "",
                "value": ""
              }
            ],
            "virtual": true
          },
          "position": {
            "x": 1120,
            "y": 560
          }
        },
        {
          "id": "9009c653-d4d5-488d-b74f-9001f1f007d9",
          "type": "basic.input",
          "data": {
            "name": "di",
            "range": "[7:0]",
            "pins": [
              {
                "index": "7",
                "name": "",
                "value": ""
              },
              {
                "index": "6",
                "name": "",
                "value": ""
              },
              {
                "index": "5",
                "name": "",
                "value": ""
              },
              {
                "index": "4",
                "name": "",
                "value": ""
              },
              {
                "index": "3",
                "name": "",
                "value": ""
              },
              {
                "index": "2",
                "name": "",
                "value": ""
              },
              {
                "index": "1",
                "name": "",
                "value": ""
              },
              {
                "index": "0",
                "name": "",
                "value": ""
              }
            ],
            "virtual": true,
            "clock": false
          },
          "position": {
            "x": 256,
            "y": 664
          }
        },
        {
          "id": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
          "type": "basic.code",
          "data": {
            "code": "// @include tv80s.v\n// @include tv80_core.v\n// @include tv80_mcode.v\n// @include tv80_alu.v\n// @include tv80_reg.v\n\ntv80s cpu\n\t(\n\t\t.m1_n\t\t(m1_n),\n\t\t.mreq_n\t\t(mreq_n),\n\t\t.iorq_n\t\t(iorq_n),\n\t\t.rd_n\t\t(rd_n),\n\t\t.wr_n\t\t(wr_n),\n\t\t.rfsh_n\t\t(rfsh_n),\n\t\t.halt_n\t\t(halt_n),\n\t\t.busak_n\t(busak_n),\n\t\t.A\t\t\t(A),\n\t\t.do\t\t\t(do),\n\t\t.reset_n\t(reset_n),\n\t\t.clk\t\t(clk),\n\t\t.wait_n\t\t(wait_n),\n\t\t.int_n\t\t(int_n),\n\t\t.nmi_n\t\t(nmi_n),\n\t\t.busrq_n\t(busrq_n),\n\t\t.di\t\t\t(di)\n\t);\n\t\n\tdefparam cpu.Mode = 0; // 0 => Z80, 1 => Fast Z80, 2 => 8080, 3 => GB\n\tdefparam cpu.T2Write = 1; // 0 => wr_n active in T3, /=0 => wr_n active in T2\n\tdefparam cpu.IOWait = 1; // 0 => Single cycle I/O, 1 => Std I/O cycle\n\t",
            "params": [],
            "ports": {
              "in": [
                {
                  "name": "clk"
                },
                {
                  "name": "reset_n"
                },
                {
                  "name": "wait_n"
                },
                {
                  "name": "int_n"
                },
                {
                  "name": "nmi_n"
                },
                {
                  "name": "busrq_n"
                },
                {
                  "name": "di",
                  "range": "[7:0]",
                  "size": 8
                }
              ],
              "out": [
                {
                  "name": "m1_n"
                },
                {
                  "name": "mreq_n"
                },
                {
                  "name": "iorq_n"
                },
                {
                  "name": "rd_n"
                },
                {
                  "name": "wr_n"
                },
                {
                  "name": "rfsh_n"
                },
                {
                  "name": "halt_n"
                },
                {
                  "name": "busak_n"
                },
                {
                  "name": "A",
                  "range": "[15:0]",
                  "size": 16
                },
                {
                  "name": "do",
                  "range": "[7:0]",
                  "size": 8
                }
              ]
            }
          },
          "position": {
            "x": 528,
            "y": 216
          },
          "size": {
            "width": 376,
            "height": 392
          }
        },
        {
          "id": "cf335c00-ec69-448d-976a-83be0298fb75",
          "type": "basic.info",
          "data": {
            "info": "**CPU Z80**",
            "readonly": true
          },
          "position": {
            "x": 672,
            "y": 176
          },
          "size": {
            "width": 120,
            "height": 40
          }
        }
      ],
      "wires": [
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "m1_n"
          },
          "target": {
            "block": "d604cf48-4de8-4aad-b89a-e9ab1c420515",
            "port": "in"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "mreq_n"
          },
          "target": {
            "block": "dc42ef15-e7e1-436e-8800-8218e1b4aa0c",
            "port": "in"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "37d3da38-10f5-437c-80a2-083674d6a225",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "clk"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "e9f48b85-1c5b-44f5-b2e4-0cdbddf2b148",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "reset_n"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "7fea655e-be65-445a-949f-db801a541a62",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "wait_n"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "23e89c7b-4f7d-45fa-a57e-02cd1272e9ad",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "int_n"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "46bad1d2-a5f2-4da3-85a6-10f3c702eee2",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "nmi_n"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "3e1d1885-b162-43a3-a647-d90f20ebe275",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "busrq_n"
          },
          "vertices": []
        },
        {
          "source": {
            "block": "9009c653-d4d5-488d-b74f-9001f1f007d9",
            "port": "out"
          },
          "target": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "di"
          },
          "vertices": [],
          "size": 8
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "iorq_n"
          },
          "target": {
            "block": "de931c26-83b6-49cd-bbbc-902c084f9174",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "rd_n"
          },
          "target": {
            "block": "45cc2a84-a11a-4787-9daa-9c02a88aa039",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "wr_n"
          },
          "target": {
            "block": "72a9a3d0-2547-4669-88bc-7b28d75b8d93",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "rfsh_n"
          },
          "target": {
            "block": "922c2c6c-cab0-4ff4-a8f2-6686bf36bd96",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "halt_n"
          },
          "target": {
            "block": "b488f5a2-c63e-4dfa-ba98-946d88d9005d",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "busak_n"
          },
          "target": {
            "block": "aa07f9af-fc38-47a2-8102-be32b3a64dd4",
            "port": "in"
          }
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "A"
          },
          "target": {
            "block": "d8afee16-1b38-4907-875a-60e69eccac4e",
            "port": "in"
          },
          "size": 16
        },
        {
          "source": {
            "block": "f9772dc5-4ab2-4b9f-9b36-4a1be3e10681",
            "port": "do"
          },
          "target": {
            "block": "2ae0b1f2-c68b-406a-866a-e9947c2423ce",
            "port": "in"
          },
          "size": 8
        }
      ]
    }
  },
  "dependencies": {}
}